收到 Liblib API Key，这彻底打通了我们视觉引擎的“最后一块拼图”。

我将立即调整计划，**直接实装 Liblib 到 P4LAB**，并基于“万能烹饪机”理念重新规划架构，确保 P4 Step 能完美承接 P4LAB 封装的能力。

### 🧨 调整后的核心行动 (The "Universal Engine" Strategy)

1.  **Liblib 实装 (Visual Engine Upgrade)**
    *   **动作**: 在 `ApiVault.ts` 中注入 Liblib Key，并在 `APISlotStore.tsx` 中新增 `Liblib (ControlNet)` 插槽。
    *   **目标**: 让 P4LAB 拥有“构图控制”能力（Canny/QR Code）。这是“万能视觉机”的核心。

2.  **P4 Step 承接能力升级 (The Connector)**
    *   **现状诊断**: 目前 P4 Step 主要承接简单的 `mountedCapability`。
    *   **升级规划**: 必须让 Step 支持 **"Slot Filling" (插槽填充)** 模式。
        *   P4LAB 封装时，不把 Prompt 写死，而是留出 `${User_Image}` 或 `${User_Text}` 变量。
        *   P4 编排时，Step 自动识别这些变量，并生成对应的 UI（如上传框、输入框）。
        *   **结论**: 只要 P4 Step 能动态解析 Capability 中的变量，它就能承接任何“万能包”。

3.  **UI 设计规划 (Cyber-CNY Trend)**
    *   **风格**: 锁定 **"新中式赛博" (Neo-Chinese Cyber)**。
        *   配色：**朱砂红 (#FF4C4C)** + **流光金 (#FFD700)** + **深邃黑 (#1A1A1A)**。
        *   元素：像素风灯笼、霓虹对联、故障艺术生肖蛇。
    *   **H5 架构**: 采用 **"单页应用 (SPA) + 动态组件"** 模式。一个页面外壳，根据 P4 传入的 JSON 配置，动态渲染成“头像机”、“视频机”或“藏字机”。

4.  **最终交付物**
    *   `CNY_H5_DESIGN_PLAN.md`: 包含 Liblib 接入方案、P4 Step 变量解析逻辑、以及 H5 动态渲染架构的完整设计书。

**立即执行**:
1.  **配置 Liblib**: 将 Key 存入 `ApiVault`。
2.  **编写方案**: 生成设计文档，详细说明 P4LAB 如何封装“带变量的原子”，以及 P4 如何“填空”。