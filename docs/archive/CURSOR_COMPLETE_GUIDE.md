# Cursor 完整使用指南（0基础版）

**目标读者**: 0代码基础用户  
**目标**: 让您独立、高效地使用Cursor，无需频繁依赖AI对话  
**原则**: 精确、清晰、可操作

---

## 📋 目录

1. [Cursor核心概念](#1-cursor核心概念)
2. [初次配置（必做）](#2-初次配置必做)
3. [三种AI交互模式详解](#3-三种ai交互模式详解)
4. [自动化设置（减少手动操作）](#4-自动化设置减少手动操作)
5. [常见场景精确操作](#5-常见场景精确操作)
6. [故障排查速查表](#6-故障排查速查表)
7. [进阶技巧](#7-进阶技巧)

---

## 1. Cursor核心概念

### 1.1 Cursor是什么？
Cursor = VS Code（代码编辑器）+ AI助手（Claude/GPT）

**关键理解**:
- Cursor本身是一个**代码编辑器**（像Word，但用来写代码）
- AI只是**辅助工具**，不是全部
- AI有三种工作模式：聊天、编辑、自动执行

### 1.2 三种AI模式对比

| 模式 | 图标位置 | 用途 | 是否执行代码 | 适合场景 |
|------|---------|------|-------------|---------|
| **Chat** | 右侧对话框 | 问答、咨询 | ❌ 不执行 | 学习、问问题 |
| **Composer** | Ctrl+I | 编辑代码 | ❌ 不执行 | 修改文件 |
| **Agent** | 左下角闪电⚡图标 | 自动工作 | ✅ 自动执行 | 复杂任务 |

**重要**: 
- 您目前用的是**Agent模式**（所以我会执行命令）
- 如果不想频繁点RUN，需要配置**自动执行权限**

---

## 2. 初次配置（必做）

### 2.1 配置自动执行权限

**目的**: 让AI自动执行命令，无需每次点击"RUN"

**步骤**:

1. **打开设置**
   - 按 `Ctrl + ,`（逗号键）
   - 或点击左下角齿轮图标 ⚙️ → Settings

2. **搜索"Auto-Run"**
   - 在搜索框输入: `auto-run`

3. **找到并修改**
   ```
   Auto-Run Mode
   ```
   
4. **选择运行模式**
   
   **选项A: Run Everything (Unsandboxed) - 完全自动（推荐）**
   - 效果: AI可以自动执行所有命令，无需确认
   - 适合: 信任的项目，想要最高效率
   
   **选项B: Auto-Run in Sandbox - 半自动（较安全）**
   - 效果: AI自动运行但在沙箱中，部分操作需确认
   - 适合: 学习阶段，需要一些安全保护
   
   **选项C: Ask Every Time - 手动（最安全但最麻烦）**
   - 效果: 每次都需要点击RUN确认
   - 适合: 不熟悉的项目，需要完全控制

**您的选择建议**: 
- 学习阶段: 选项B（Auto-Run in Sandbox）
- 熟悉后: 选项A（Run Everything）← **推荐，最方便**

### 2.2 配置AI模型

**目的**: 选择最强大的AI模型

**步骤**:

1. 点击右上角的模型名称（如"Claude 3.5 Sonnet"）
2. 选择 **Claude 3.5 Sonnet**（最推荐）
3. 如果有Pro订阅，选择 **Claude Opus**（更强大）

### 2.3 配置快捷键（重要）

**目的**: 快速调用AI，无需鼠标

**默认快捷键**:

| 功能 | 快捷键 | 说明 |
|------|--------|------|
| 打开Chat | `Ctrl + L` | 右侧聊天面板 |
| 打开Composer | `Ctrl + I` | 编辑当前文件 |
| 打开Agent | `Ctrl + Shift + L` | 自动执行任务 |
| 接受AI建议 | `Tab` | 采纳AI写的代码 |
| 拒绝AI建议 | `Esc` | 取消AI的修改 |

**自定义快捷键**（如果不习惯）:

1. 按 `Ctrl + K, Ctrl + S`（打开快捷键设置）
2. 搜索 "Cursor Chat" 或 "Composer"
3. 点击快捷键旁边的铅笔图标，按您想要的键

---

## 3. 三种AI交互模式详解

### 3.1 Chat模式（对话模式）

**位置**: 右侧面板，或按 `Ctrl + L`

**用途**:
- ✅ 问问题（"这段代码什么意思？"）
- ✅ 学习概念（"什么是React？"）
- ✅ 代码解释（"为什么这里报错？"）
- ❌ **不能**直接修改代码

**操作步骤**:

1. 按 `Ctrl + L` 打开Chat
2. 输入问题，按 `Enter` 发送
3. AI回答后，可以继续追问

**示例**:
```
您: src/pages/P4LabPage.tsx 这个文件是做什么的？
AI: 这个文件是P4工业实验室的主页面组件...
您: 参数面板在哪个部分？
AI: 在第1298行的dynamicFormContent...
```

**何时使用**: 
- 想了解代码逻辑
- 遇到错误不知道怎么办
- 学习新概念

---

### 3.2 Composer模式（编辑模式）

**位置**: 按 `Ctrl + I` 在当前文件打开

**用途**:
- ✅ 修改当前打开的文件
- ✅ 重构代码
- ✅ 添加功能
- ❌ **不能**执行命令或操作多个文件

**操作步骤**:

1. 打开要修改的文件（如 `src/App.tsx`）
2. 按 `Ctrl + I` 打开Composer
3. 输入修改要求
4. AI会直接在文件中显示修改
5. 按 `Tab` 接受，或 `Esc` 拒绝

**示例**:
```
您在 src/components/Button.tsx 中:
Composer输入: 把按钮颜色改成蓝色

AI会直接修改:
- backgroundColor: 'red' → backgroundColor: 'blue'

您看到后:
满意 → 按 Tab 接受
不满意 → 按 Esc 取消，重新描述
```

**何时使用**:
- 需要修改单个文件
- 想快速调整代码
- 重构函数或组件

---

### 3.3 Agent模式（自动执行模式）★ 您现在用的

**位置**: 左下角 ⚡ 闪电图标，或 `Ctrl + Shift + L`

**用途**:
- ✅ 自动执行复杂任务
- ✅ 同时修改多个文件
- ✅ 运行命令（npm install, git commit等）
- ✅ 创建新文件
- ✅ 搜索和分析代码

**操作步骤**:

1. 按 `Ctrl + Shift + L` 打开Agent
2. 输入完整的任务描述
3. AI会自动:
   - 读取相关文件
   - 修改代码
   - 执行命令
   - 报告结果

**示例**:
```
您输入: 修复P4LAB参数不显示的问题

AI会自动:
1. 搜索相关文件（P4LabPage.tsx, APISlotStore.tsx）
2. 分析问题原因
3. 修改文件
4. 运行TypeScript检查
5. 报告修复结果
```

**何时使用**:
- 复杂的多步骤任务
- 需要修改多个文件
- 需要运行命令
- **您的主要工作模式**

---

## 4. 自动化设置（减少手动操作）

### 4.1 启用Agent自动执行

**配置文件位置**: `.cursor/settings.json`

**精确步骤**:

1. 在Cursor中按 `Ctrl + Shift + P`
2. 输入 `Preferences: Open Settings (JSON)`
3. 按 `Enter`
4. 在打开的文件中添加:

```json
{
  "cursor.agent.requiredPermissions": ["all"],
  "cursor.agent.autoRun": true,
  "cursor.agent.maxIterations": 50,
  "cursor.agent.confirmDangerousOperations": true
}
```

5. 按 `Ctrl + S` 保存

**解释**:
- `requiredPermissions: ["all"]`: AI可以自动执行所有操作
- `autoRun: true`: 自动运行，无需点击RUN
- `maxIterations: 50`: AI最多尝试50次（复杂任务）
- `confirmDangerousOperations: true`: 危险操作仍需确认（如删除文件）

### 4.2 配置快速模板

**目的**: 快速输入常见指令

**步骤**:

1. 按 `Ctrl + Shift + P`
2. 输入 `Snippets: Configure User Snippets`
3. 选择 `global.code-snippets`
4. 添加以下内容:

```json
{
  "Fix Bug": {
    "prefix": "fixbug",
    "body": [
      "修复以下问题：",
      "$1",
      "要求：",
      "1. 找到问题根源",
      "2. 提供修复方案",
      "3. 验证修复后代码正常运行",
      "4. 更新相关文档"
    ]
  },
  "Add Feature": {
    "prefix": "addfeature",
    "body": [
      "添加新功能：$1",
      "要求：",
      "1. 不影响现有功能",
      "2. 代码符合项目规范",
      "3. 添加必要的注释",
      "4. 验证功能正常"
    ]
  },
  "Code Review": {
    "prefix": "review",
    "body": [
      "代码审查：$1",
      "检查项：",
      "1. 代码质量",
      "2. 潜在bug",
      "3. 性能问题",
      "4. 安全隐患",
      "5. 最佳实践建议"
    ]
  }
}
```

**使用方法**:
- 在Agent输入框中输入 `fixbug` 然后按 `Tab`
- 自动展开为完整的任务描述
- 填写具体问题，按 `Enter` 提交

### 4.3 配置文件监视（自动检测问题）

**目的**: Cursor自动发现代码问题

**步骤**:

1. 按 `Ctrl + ,` 打开设置
2. 搜索 `typescript.validate`
3. 确保勾选:
   - ✅ TypeScript: Validate Enable
   - ✅ JavaScript: Validate Enable

4. 搜索 `editor.codeActionsOnSave`
5. 添加:

```json
{
  "editor.codeActionsOnSave": {
    "source.fixAll": true,
    "source.organizeImports": true
  }
}
```

**效果**: 每次保存文件时自动:
- 修复简单错误
- 整理导入语句
- 格式化代码

---

## 5. 常见场景精确操作

### 5.1 场景: 修复代码错误

**情况**: 看到红色波浪线（错误）或黄色波浪线（警告）

**精确步骤**:

1. 鼠标悬停在错误处，查看错误信息
2. **方法A: 使用Quick Fix（最快）**
   - 点击错误处的💡灯泡图标
   - 选择建议的修复方案
   - 按 `Enter` 应用

3. **方法B: 询问AI**
   - 选中错误的代码
   - 按 `Ctrl + L` 打开Chat
   - 输入: `这里报错了，帮我修复`
   - AI会解释原因并提供修复建议

4. **方法C: 自动修复**
   - 按 `Ctrl + Shift + L` 打开Agent
   - 输入: `修复所有TypeScript错误`
   - AI会自动修复所有错误

### 5.2 场景: 添加新功能

**情况**: 需要在现有代码中添加新功能

**精确步骤**:

1. **明确功能需求**（写下来）
   ```
   示例: 在P4LAB页面添加一个"导出配置"按钮
   ```

2. **打开Agent模式**
   - 按 `Ctrl + Shift + L`

3. **精确描述需求**（重要！）
   ```
   添加新功能：在P4LAB页面右上角添加"导出配置"按钮
   
   具体要求：
   1. 按钮位置：页面右上角，"点火"按钮旁边
   2. 按钮样式：与现有按钮保持一致
   3. 点击功能：导出当前参数为JSON文件
   4. 文件名格式：p4lab_config_YYYYMMDD.json
   5. 不影响现有功能
   
   涉及文件：src/pages/P4LabPage.tsx
   ```

4. **按Enter提交**，等待AI完成

5. **验证结果**
   - 运行 `npm run dev`（如果未运行）
   - 打开浏览器测试新功能
   - 如有问题，再次描述让AI修复

### 5.3 场景: 理解现有代码

**情况**: 看到不懂的代码，想知道它做什么

**精确步骤**:

1. **选中想了解的代码**
   - 鼠标拖动选择代码
   - 或 `Shift + 上下箭头` 选择多行

2. **右键点击选中的代码**
   - 选择 "Cursor: Explain This"
   - 或按 `Ctrl + L` 然后输入 "解释这段代码"

3. **AI会解释**:
   - 这段代码的作用
   - 使用的技术
   - 为什么这样写

4. **追问细节**:
   ```
   您: 为什么要用useMemo？
   AI: useMemo用于缓存计算结果，避免重复计算...
   您: 如果不用会怎样？
   AI: 不用的话每次渲染都会重新计算...
   ```

### 5.4 场景: 清理项目（删除无用文件）

**情况**: 项目有很多不用的文件，想清理

**精确步骤**:

1. **扫描僵尸文件**
   - 按 `Ctrl + Shift + L` 打开Agent
   - 输入:
   ```
   扫描项目中的僵尸文件（未被引用的文件）
   
   要求：
   1. 列出所有未被引用的文件
   2. 分类：安全删除 / 需确认 / 保留
   3. 生成删除建议报告
   4. 不要自动删除，只生成报告
   ```

2. **审查报告**
   - AI会生成类似 `ZOMBIE_SCAN_REPORT.md` 的报告
   - 仔细查看哪些文件可以删除

3. **执行删除**（确认后）
   - 再次打开Agent
   - 输入:
   ```
   根据报告删除"安全删除"类别的文件
   
   要求：
   1. 只删除明确标记为"安全删除"的文件
   2. 删除前创建备份
   3. 删除后运行TypeScript检查
   4. 如有错误立即回滚
   ```

### 5.5 场景: Git操作

**情况**: 需要提交代码到Git

**精确步骤**:

**方法A: 使用Agent（推荐，自动写commit信息）**

1. 按 `Ctrl + Shift + L`
2. 输入:
```
提交当前所有更改到Git

要求：
1. 自动生成commit信息（描述清楚改了什么）
2. commit信息使用中文
3. 提交前检查是否有未追踪的大文件
4. 显示提交结果
```

**方法B: 使用Cursor内置Git面板**

1. 点击左侧的"源代码管理"图标（分支图标）
2. 查看修改的文件列表
3. 在"消息"框输入commit信息
4. 点击 ✓ 提交按钮

---

## 6. 故障排查速查表

### 6.1 AI不执行命令，一直要我点RUN

**原因**: 权限设置不正确

**解决方案**:

1. 按 `Ctrl + ,` 打开设置
2. 搜索 `cursor.agent.requiredPermissions`
3. 设置为 `["all"]`
4. 重启Cursor

### 6.2 AI修改的代码不生效

**原因**: 文件未保存或缓存问题

**解决方案**:

1. **保存所有文件**: `Ctrl + K, S`（按K后松开，再按S）
2. **重启开发服务器**:
   - 找到运行 `npm run dev` 的终端
   - 按 `Ctrl + C` 停止
   - 再次运行 `npm run dev`
3. **清除浏览器缓存**: `Ctrl + F5` 强制刷新

### 6.3 TypeScript报错红色波浪线

**原因**: 代码有类型错误

**解决方案**:

1. **查看错误详情**: 鼠标悬停在红线处
2. **使用Quick Fix**: 点击💡图标
3. **询问AI**: 
   ```
   按 Ctrl + L
   输入: 修复这个TypeScript错误: [粘贴错误信息]
   ```

### 6.4 Cursor卡住不响应

**原因**: AI请求过多或内存不足

**解决方案**:

1. **等待30秒**: 可能正在处理
2. **取消当前操作**: 按 `Esc`
3. **重启Cursor**: 关闭后重新打开
4. **检查网络**: 确保能访问AI服务

### 6.5 找不到某个文件

**原因**: 文件路径不对或文件被删除

**解决方案**:

1. **使用搜索**: 
   - 按 `Ctrl + P`
   - 输入文件名（部分匹配即可）
   - 按 `Enter` 打开

2. **使用文件浏览器**:
   - 点击左侧"资源管理器"图标
   - 展开文件夹查找

3. **询问AI**:
   ```
   在哪个目录下可以找到P4LabPage.tsx？
   ```

---

## 7. 进阶技巧

### 7.1 使用@符号引用文件

**目的**: 让AI关注特定文件

**用法**:
```
在Agent输入框中:
修复@src/pages/P4LabPage.tsx中的参数显示问题

@后面跟文件路径，AI会自动读取该文件
```

**支持的引用类型**:
- `@文件名`: 引用单个文件
- `@文件夹/`: 引用整个文件夹
- `@符号`: 引用函数或类（如 @MyComponent）

### 7.2 多轮对话技巧

**目的**: 逐步细化需求

**示例**:
```
第1轮: 我想添加一个导出功能
AI: 需要导出什么内容？

第2轮: 导出当前的P4LAB配置参数
AI: 导出格式是JSON、CSV还是其他？

第3轮: JSON格式，保存到downloads文件夹
AI: 明白了，开始实现...
```

**技巧**: 不要一次性给太多信息，逐步细化效果更好

### 7.3 创建任务模板

**目的**: 标准化常见任务

**步骤**:

1. 在项目根目录创建 `.cursor/templates/` 文件夹
2. 创建任务模板文件，如 `fix_bug_template.md`:

```markdown
# Bug修复任务模板

## 问题描述
[描述bug现象]

## 重现步骤
1. 
2. 
3. 

## 预期行为
[应该怎样]

## 实际行为
[实际怎样]

## 涉及文件
- 

## 修复要求
1. 找到根本原因
2. 提供修复方案
3. 验证修复后功能正常
4. 不破坏现有功能
5. 更新相关文档
```

3. 使用时复制模板到Agent输入框，填写具体内容

### 7.4 设置AI专注模式

**目的**: 让AI只关注特定文件，不分散注意力

**步骤**:

1. 在Agent输入框输入:
```
专注模式：只修改src/pages/P4LabPage.tsx，不要修改其他文件

任务：[你的任务]
```

2. AI会只修改指定文件，不会到处搜索

---

## 8. 快速参考卡

### 8.1 快捷键速查

| 操作 | 快捷键 | 说明 |
|------|--------|------|
| 打开Chat | `Ctrl + L` | 问答模式 |
| 打开Agent | `Ctrl + Shift + L` | 自动执行 |
| 打开Composer | `Ctrl + I` | 编辑当前文件 |
| 文件搜索 | `Ctrl + P` | 快速打开文件 |
| 全局搜索 | `Ctrl + Shift + F` | 搜索代码内容 |
| 保存文件 | `Ctrl + S` | 保存当前文件 |
| 保存所有 | `Ctrl + K, S` | 保存所有修改 |
| 撤销 | `Ctrl + Z` | 撤销修改 |
| 重做 | `Ctrl + Y` | 重做撤销 |
| 格式化代码 | `Shift + Alt + F` | 美化代码 |

### 8.2 Agent任务模板速查

**修复Bug**:
```
修复以下问题：[问题描述]

要求：
1. 找到问题根源
2. 提供修复方案
3. 验证修复后代码正常
4. 更新相关文档
```

**添加功能**:
```
添加新功能：[功能描述]

具体要求：
1. 位置：[在哪里添加]
2. 样式：[什么样式]
3. 功能：[做什么]
4. 不影响现有功能

涉及文件：[文件路径]
```

**代码审查**:
```
代码审查：[文件或功能]

检查项：
1. 代码质量
2. 潜在bug
3. 性能问题
4. 安全隐患
5. 最佳实践建议
```

**清理代码**:
```
清理项目僵尸文件

要求：
1. 扫描未被引用的文件
2. 分类：安全删除/需确认/保留
3. 生成删除建议报告
4. 不要自动删除
```

---

## 9. 学习路径

### 第1周: 基础操作
- [ ] 完成初次配置（第2节）
- [ ] 熟悉三种AI模式（第3节）
- [ ] 练习快捷键（每天5次）
- [ ] 尝试修复简单错误（第5.1节）

### 第2周: 进阶使用
- [ ] 配置自动化设置（第4节）
- [ ] 使用Agent完成复杂任务
- [ ] 学习@引用文件（第7.1节）
- [ ] 创建自己的任务模板（第7.3节）

### 第3周: 精通Cursor
- [ ] 独立完成整个功能开发
- [ ] 配置专属快捷键和模板
- [ ] 使用AI进行代码审查
- [ ] 教别人使用Cursor

---

## 10. 常见问题FAQ

**Q: AI理解不了我的意思怎么办？**
A: 
1. 把需求拆分成小步骤
2. 使用@引用具体文件
3. 提供示例代码
4. 截图说明问题位置

**Q: AI修改的代码不是我想要的？**
A:
1. 按 `Ctrl + Z` 撤销修改
2. 重新描述需求（更具体）
3. 或者描述"修改以下内容：[具体指出]"

**Q: 如何知道AI做了什么？**
A:
1. AI会在对话中报告每个步骤
2. 查看左侧"源代码管理"面板，看修改了哪些文件
3. 点击文件名查看具体修改内容

**Q: 担心AI破坏代码怎么办？**
A:
1. 定期提交Git（每完成一个功能）
2. 设置 `confirmDangerousOperations: true`
3. 任务前要求AI："修改前先备份"

**Q: AI太慢了，如何加速？**
A:
1. 缩小任务范围（一次只做一件事）
2. 使用@指定具体文件，不要让AI到处搜索
3. 选择Claude 3.5 Sonnet模型（最快）

---

## 11. 紧急情况处理

### AI把代码改坏了

**立即操作**:
1. **不要慌张**
2. 按 `Ctrl + Z` 撤销（如果刚改的）
3. 或者 Git回滚:
   ```
   按 Ctrl + Shift + L 打开Agent
   输入: 回滚到上一个Git提交
   ```

### Cursor无法启动

**检查清单**:
1. 重启电脑
2. 检查是否有Cursor更新
3. 删除 `%AppData%\Cursor\` 缓存文件夹
4. 重新安装Cursor

### AI一直出错

**解决方案**:
1. 切换到Claude模型（可能是模型问题）
2. 清除对话历史（右上角三点菜单 → Clear Chat）
3. 重启Cursor
4. 检查网络连接

---

## 12. 获取帮助

### Cursor官方资源
- 官方文档: https://docs.cursor.com
- Discord社区: https://discord.gg/cursor
- GitHub Issues: https://github.com/getcursor/cursor/issues

### 项目内帮助
- 查看项目文档: `task_plan.md`, `findings.md`
- 询问AI: `项目结构是怎样的？`
- 查看Git历史: 了解之前的修改

---

**记住**: 
1. **精确描述**需求比什么都重要
2. **小步快跑**比一次性大改更安全
3. **经常保存和提交**Git防止丢失工作
4. **不懂就问**AI，它会耐心解释

祝您使用Cursor愉快！🚀
