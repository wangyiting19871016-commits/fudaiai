# 春节H5流转规范（制作视频与引导）

## 1. 统一入口与路由

### 1.1 视频选择页（唯一入口）
- 统一入口：`/festival/category/video`
- 兼容别名：`/festival/video-category`（与上面等价）

### 1.2 两条视频分支
- 数字人拜年：`/festival/video`
- Kling 特效：`/festival/kling-effects`

## 2. 跨页数据合同（NavigationState）

所有页面间的素材流转，统一使用 `createNavigationState()` 构造 `location.state`，字段如下：
- `image?: string` 图片 URL（dataURL、blobURL、或 http(s) URL）
- `audio?: string` 音频 URL
- `text?: string` 文案文本
- `originalCaption?: string` 原判词（如结果页 caption）
- `textSource?: 'caption' | 'user' | 'template' | 'ai'`
- `sourceFeatureId?: string` 来源功能标识
- `sourcePagePath?: string` 来源页面路径

禁止散装字段（例如 `audioUrl`、`caption`）直接透传到视频页，避免下游读不到。

## 3. “制作视频”按钮的统一流转

### 3.1 从图片结果页进入
1. 结果页构造 `NavigationState`（带 `image + text`）
2. 跳转到视频选择页：`/festival/category/video`
3. 用户选择：
   - 数字人拜年 → `/festival/video`（透传 state）
   - Kling 特效 → `/festival/kling-effects`（透传 state）

### 3.2 从文案/语音结果页进入
1. 文案/语音页构造 `NavigationState`（带 `text` 或 `audio`，如有图则带 `image`）
2. 跳转到视频选择页：`/festival/category/video`
3. 若缺 `image`，选择页给出补齐入口（素材库/生成头像），同时允许用户继续进入并在下游补图。

### 3.3 从素材库组合进入
1. 素材库组合结果统一构造 `NavigationState`（`image + text + audio` 中能带的尽量带齐）
2. 跳转到视频选择页：`/festival/category/video`

## 4. 缺参降级规则

### 4.1 数字人拜年（/festival/video）
- 最低需要：`image`
- 体验最佳：`image + text + (audio 或音色选择)`

### 4.2 Kling 特效（/festival/kling-effects）
- 最低需要：`image`
- 不依赖 `text/audio`

## 5. 弱联动玩法的引导策略（以运势抽卡 M7 为例）

运势抽卡（M7）产出是“成品图”，不强推组合链路。
- 主行为：再抽一次 / 保存 / 分享
- 推荐继续玩：
  - 生成新年头像（Avatar 分类）
  - 写拜年文案（`/festival/text/text-blessing`）
  - 高情商回复（`/festival/smart-reply`）

