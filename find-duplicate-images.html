<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æƒ…ä¾£ç´ æå»é‡å·¥å…·</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: system-ui, -apple-system, sans-serif;
      background: #f5f5f5;
      padding: 20px;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 2px 20px rgba(0,0,0,0.1);
    }

    h1 {
      margin-bottom: 20px;
      color: #333;
    }

    .instructions {
      background: #fff3cd;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 30px;
      border-left: 4px solid #ffc107;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 30px;
    }

    .image-card {
      border: 3px solid #ddd;
      border-radius: 8px;
      padding: 10px;
      background: #fafafa;
      transition: all 0.3s;
      cursor: pointer;
      position: relative;
    }

    .image-card:hover {
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      transform: translateY(-2px);
    }

    .image-card.selected {
      border-color: #e53935;
      background: #ffebee;
    }

    .image-card img {
      width: 100%;
      height: 200px;
      object-fit: cover;
      border-radius: 4px;
      display: block;
    }

    .image-info {
      margin-top: 10px;
      font-size: 12px;
      color: #666;
    }

    .image-info div {
      margin: 4px 0;
    }

    .filename {
      font-weight: bold;
      color: #333;
      font-size: 14px;
      margin-bottom: 8px;
      word-break: break-all;
    }

    .delete-btn {
      position: absolute;
      top: 15px;
      right: 15px;
      background: #e53935;
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 12px;
      font-weight: bold;
      opacity: 0;
      transition: opacity 0.2s;
    }

    .image-card:hover .delete-btn {
      opacity: 1;
    }

    .delete-btn:hover {
      background: #c62828;
    }

    .selected-list {
      margin-top: 30px;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 8px;
    }

    .selected-list h3 {
      margin-bottom: 15px;
      color: #e53935;
    }

    .selected-files {
      background: white;
      padding: 15px;
      border-radius: 4px;
      max-height: 200px;
      overflow-y: auto;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      line-height: 1.8;
    }

    .action-buttons {
      margin-top: 20px;
      display: flex;
      gap: 10px;
    }

    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: 6px;
      font-size: 14px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn-danger {
      background: #e53935;
      color: white;
    }

    .btn-danger:hover {
      background: #c62828;
    }

    .btn-secondary {
      background: #6c757d;
      color: white;
    }

    .btn-secondary:hover {
      background: #5a6268;
    }

    .stats {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
      font-size: 14px;
    }

    .stat-item {
      padding: 10px 15px;
      background: #e3f2fd;
      border-radius: 6px;
      color: #1565c0;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ–¼ï¸ æƒ…ä¾£ç´ æå»é‡å·¥å…·</h1>

    <div class="instructions">
      <strong>ğŸ“‹ ä½¿ç”¨è¯´æ˜:</strong>
      <ol style="margin-left: 20px; margin-top: 10px; line-height: 1.8;">
        <li>æŸ¥çœ‹ä¸‹æ–¹æ‰€æœ‰æƒ…ä¾£ç´ æå›¾ç‰‡</li>
        <li>ç‚¹å‡»å›¾ç‰‡å¯ä»¥é€‰ä¸­/å–æ¶ˆï¼ˆçº¢æ¡†è¡¨ç¤ºé€‰ä¸­ï¼‰</li>
        <li>ç‚¹å‡»"æ ‡è®°åˆ é™¤"æŒ‰é’®å¿«é€Ÿæ ‡è®°é‡å¤å›¾ç‰‡</li>
        <li>ç¡®è®¤åï¼Œå¤åˆ¶ä¸‹æ–¹çš„åˆ é™¤å‘½ä»¤åœ¨ç»ˆç«¯æ‰§è¡Œ</li>
      </ol>
    </div>

    <div class="stats">
      <div class="stat-item">æ€»æ–‡ä»¶æ•°: <span id="totalCount">0</span></div>
      <div class="stat-item">å·²é€‰æ‹©åˆ é™¤: <span id="selectedCount">0</span></div>
      <div class="stat-item">æ€»å¤§å°: <span id="totalSize">0</span> MB</div>
    </div>

    <div class="grid" id="imageGrid"></div>

    <div class="selected-list" style="display: none;" id="selectedList">
      <h3>âœ… å·²é€‰æ‹©åˆ é™¤çš„æ–‡ä»¶ (<span id="selectedCountText">0</span> ä¸ª)</h3>
      <div class="selected-files" id="selectedFiles"></div>

      <div class="action-buttons">
        <button class="btn btn-danger" onclick="copyDeleteCommand()">ğŸ“‹ å¤åˆ¶åˆ é™¤å‘½ä»¤</button>
        <button class="btn btn-secondary" onclick="clearSelection()">ğŸ”„ æ¸…é™¤é€‰æ‹©</button>
      </div>
    </div>
  </div>

  <script>
    const images = [
      { name: 'couple-material-1.jpg', size: 8572088, date: '2æœˆ 6 21:42' },
      { name: 'couple-material-2.jpg', size: 7688775, date: '2æœˆ 6 21:42' },
      { name: 'couple-material-3.png', size: 1567491, date: '2æœˆ 10 16:20' },
      { name: 'couple-material-4.png', size: 2622342, date: '2æœˆ 10 16:30' },
      { name: 'couple-material-5.png', size: 3129005, date: '2æœˆ 10 16:35' },
      { name: 'couple-material-6.png', size: 1556395, date: '2æœˆ 10 16:43' },
      { name: 'couple-material-7.png', size: 1782054, date: '2æœˆ 11 14:31' },
      { name: 'couple-material-8.png', size: 2512513, date: '2æœˆ 11 14:40' },
      { name: 'couple-material-9.png', size: 2454606, date: '2æœˆ 11 14:44' },
      { name: 'couple-material-10.png', size: 2771047, date: '2æœˆ 11 15:12' }
    ];

    const selected = new Set();

    function formatBytes(bytes) {
      return (bytes / 1024 / 1024).toFixed(2);
    }

    function updateStats() {
      const totalSize = images.reduce((sum, img) => sum + img.size, 0);
      document.getElementById('totalCount').textContent = images.length;
      document.getElementById('totalSize').textContent = formatBytes(totalSize);
      document.getElementById('selectedCount').textContent = selected.size;
      document.getElementById('selectedCountText').textContent = selected.size;

      document.getElementById('selectedList').style.display = selected.size > 0 ? 'block' : 'none';

      if (selected.size > 0) {
        const filesList = Array.from(selected).map(name => `  ${name}`).join('\n');
        document.getElementById('selectedFiles').textContent = filesList;
      }
    }

    function toggleSelect(filename) {
      const card = document.querySelector(`[data-filename="${filename}"]`);

      if (selected.has(filename)) {
        selected.delete(filename);
        card.classList.remove('selected');
      } else {
        selected.add(filename);
        card.classList.add('selected');
      }

      updateStats();
    }

    function clearSelection() {
      selected.clear();
      document.querySelectorAll('.image-card').forEach(card => {
        card.classList.remove('selected');
      });
      updateStats();
    }

    function copyDeleteCommand() {
      const files = Array.from(selected);
      if (files.length === 0) {
        alert('è¯·å…ˆé€‰æ‹©è¦åˆ é™¤çš„æ–‡ä»¶');
        return;
      }

      const command = `cd /f/project_kuajing/public/assets/showcase\nrm ${files.join(' ')}`;

      navigator.clipboard.writeText(command).then(() => {
        alert(`âœ… å·²å¤åˆ¶åˆ é™¤å‘½ä»¤ï¼\n\nå°†åˆ é™¤ ${files.length} ä¸ªæ–‡ä»¶:\n${files.join('\n')}\n\nè¯·åœ¨ç»ˆç«¯æ‰§è¡Œæ­¤å‘½ä»¤ã€‚`);
      }).catch(() => {
        prompt('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶ä»¥ä¸‹å‘½ä»¤:', command);
      });
    }

    // æ¸²æŸ“å›¾ç‰‡ç½‘æ ¼
    const grid = document.getElementById('imageGrid');
    images.forEach(img => {
      const card = document.createElement('div');
      card.className = 'image-card';
      card.dataset.filename = img.name;
      card.onclick = () => toggleSelect(img.name);

      card.innerHTML = `
        <button class="delete-btn" onclick="event.stopPropagation(); toggleSelect('${img.name}')">
          æ ‡è®°åˆ é™¤
        </button>
        <img src="/assets/showcase/${img.name}" alt="${img.name}"
             onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%22300%22 height=%22200%22><rect width=%22300%22 height=%22200%22 fill=%22%23ddd%22/><text x=%2250%%22 y=%2250%%22 text-anchor=%22middle%22 fill=%22%23999%22>åŠ è½½å¤±è´¥</text></svg>'">
        <div class="filename">${img.name}</div>
        <div class="image-info">
          <div>ğŸ“¦ å¤§å°: ${formatBytes(img.size)} MB</div>
          <div>ğŸ“… ä¸Šä¼ : ${img.date}</div>
        </div>
      `;

      grid.appendChild(card);
    });

    updateStats();
  </script>
</body>
</html>
