/**
 * 💬 高情商回复 - Few-shot Examples（基于2025-2026网络热梗）
 *
 * 这些示例不是直接返回给用户，而是作为参考让DeepSeek学习风格
 * 数据来源：网络热门回复、脱口秀段子、知乎神回复
 */

export interface SmartReply {
  text: string;
  style: 'duiren' | 'yougen' | 'qingshang';
}

/**
 * 风格示例库 - 用于教AI学习不同风格（100+条真实热梗）
 */
export const STYLE_EXAMPLES = {
  '催婚': {
    duiren: [
      '我只是不结婚，又不是不交电费',
      '再催我就出家了，到时候叫你师太',
      '您家有矿啊，结婚这么积极帮我交份子钱？',
      '我单身碍着您啥事了，月老都没您着急',
      '您先把彩礼准备好，我现在就去领证',
      '急啥呢，结婚证又不会涨价',
      '您是媒婆吗？没有提成别操心',
      '结婚要趁早？您当年多大结的婚来着',
      '我这不是在等天上掉对象吗',
      '您要是给我介绍年薪百万的，我今天就结'
    ],
    yougen: [
      '儿孙自有儿孙福，没有儿孙我享福',
      '急啥呢，我这不是在等国家分配对象吗',
      '我对象正在来的路上，可能走错路了',
      '单身是种生活方式，您不懂的',
      '正在修炼葵花宝典，练完就结婚',
      '我还没准备好当你们的小情人呢',
      '国家都没催我，您比国家还着急',
      '对象在充气中，请稍后',
      '我谈了个异地恋，对方在火星',
      '婚姻是爱情的坟墓，我还想多活几年'
    ],
    qingshang: [
      '缘分这事儿急不来，您帮我留意着点呗',
      '正在努力中，您有好资源可以介绍啊',
      '顺其自然，我相信最好的总在后头',
      '等遇到对的人，第一时间通知您',
      '谢谢关心，缘分到了自然就成了',
      '我也想结，帮我介绍个靠谱的呗',
      '您当年是怎么找到对象的，传授传授经验',
      '先立业再成家，踏实点比较好',
      '感谢关心，一切都在计划中',
      '我们这代人结婚标准比较高，慢慢来'
    ]
  },

  '催生': {
    duiren: [
      '生孩子前先给我准备500万教育基金呗',
      '您养还是我养？您养我现在就生',
      '先把房贷还清再说，不想孩子跟我吃苦',
      '您出钱养我就生，包吃包住那种',
      '等我中彩票了就生，给孩子最好的',
      '生孩子容易，养孩子贵，您包月嫂吗',
      '您帮我带到18岁我就生',
      '我连对象都没有，您让我生什么',
      '孩子太贵了，我现在连猫都养不起',
      '先把份子钱还我再说生娃的事'
    ],
    yougen: [
      '我还是个孩子，怎么生孩子',
      '等我存够奶粉钱再说，现在穷养不起',
      '正在攒钱买奶粉，您要不要赞助一下',
      '我俩还是宝宝呢，再等等',
      '孩子太贵了，养不起养不起',
      '李雪琴说她妈教了她三次婚姻，我还在学',
      '我妈都不催，您比我妈还急',
      '现在生孩子都要预约吗',
      '生孩子容易，教育孩子难，我还没学会',
      '国家都放开三胎了，说明大家都不生'
    ],
    qingshang: [
      '计划中计划中，等条件成熟就安排',
      '身体还在调理，医生说不着急',
      '这事儿得两个人商量，急不来呀',
      '等事业稳定点再说，对孩子负责',
      '谢谢关心，我们有自己的规划',
      '想给孩子最好的，所以要多准备准备',
      '现在压力太大，等缓一缓',
      '一切听老公的，他说生我就生',
      '要生就要好好养，所以要做好准备',
      '您那会儿养孩子容易，现在可太贵了'
    ]
  },

  '问工资': {
    duiren: [
      '您先说您的，咱们交换情报',
      '够花就行，问这个干啥，要借钱吗',
      '不多不少，反正比您猜的多点',
      '工资是隐私，您这不合适吧',
      '您是税务局的吗，查这么细',
      '工资保密，无可奉告，再问借钱',
      '我要说出来怕吓着您',
      '够还信用卡就行，别的不敢想',
      '您猜猜看，猜对了我请客',
      '这个话题咱们换一换'
    ],
    yougen: [
      '能养活自己，饿不死也富不了',
      '马云说钱够花就行，我深以为然',
      '刚好够交您的份子钱',
      '比上不足比下有余，活着挺好',
      '工资保密，但可以透露：不够花',
      '月薪两万...朝上',
      '和马化腾差不多，他多点',
      '够吃饭的，不够买房的',
      '反正没有马云多，这我能确定',
      '工资嘛，说出来您也不信'
    ],
    qingshang: [
      '还行还行，在这个城市能活下去',
      '这个行业就这样，不算高也不算低',
      '不方便透露哈，您懂的',
      '普通水平吧，养家糊口没问题',
      '还可以，公司待遇挺好的',
      '叔您一个月多少，给我参考参考',
      '工资不是最重要的，喜欢就好',
      '比刚毕业时好多了',
      '够用就行，不攀比',
      '这个不太好说，咱聊点别的'
    ]
  },

  '问对象': {
    duiren: [
      '单身怎么了，单身吃您家大米了',
      '您介绍一个呗，年薪百万那种',
      '有对象了还能来喝您的喜酒吗',
      '这事儿您管太宽了吧',
      '没有，您要介绍吗，不要钱那种',
      '我这条件还没人要？开玩笑呢',
      '排队的人都到村口了，您帮我筛选筛选',
      '单身怎么了，我还想多享受几年自由',
      '您家孩子有对象吗，咱俩换换',
      '对象这东西，强求不来'
    ],
    yougen: [
      '有啊，就是还在充气中',
      '有一个，叫工作，天天粘着我',
      '谈了个异地恋，对方在火星',
      '对象？您说的是工作对象吗',
      '有啊，二次元的，特别听话',
      '对象在下载中，进度89%',
      '我谈了七八个，就是都在朋友圈里',
      '有啊，每晚陪我睡觉——手机',
      '我这不是在等国家分配吗',
      '对象太贵了，暂时养不起'
    ],
    qingshang: [
      '还没遇到合适的，不着急',
      '正在观察几个候选人呢',
      '缘分没到，您帮我介绍啊',
      '单身挺好的，自由自在',
      '有合适的再谈，不将就',
      '您要是给我介绍对象，这事就成了',
      '工作太忙，还没顾上',
      '标准有点高，慢慢找',
      '等遇到对的人就好了',
      '先把事业搞好，其他自然就来了'
    ]
  },

  '比孩子': {
    duiren: [
      '您孩子考清华了吗？没有啊，那有啥好比的',
      '比孩子不如比谁先退休',
      '您家孩子这么优秀，肯定随您',
      '比来比去有意思吗，都是孩子',
      '您开心就好，我不比这个',
      '您孩子优秀是因为您教得好',
      '咱能不能比点别的，比如红包',
      '您家孩子都这么优秀了还比啥',
      '行行行，您家孩子最棒',
      '我家孩子还没出生就已经赢了'
    ],
    yougen: [
      '我家孩子会的您家孩子不一定会——因为我没孩子',
      '别比了，都是别人家的孩子',
      '我家孩子特优秀，就是还没出生',
      '比孩子？我连对象都没有呢',
      '孩子都很棒，没必要比',
      '我妈从来不拿我和别人比，因为我无可比拟',
      '您家孩子这么优秀，应该拿诺贝尔奖',
      '比孩子不如比谁家红包大',
      '我家孩子在另一个宇宙，您看不见',
      '每个孩子都是独特的，没法比'
    ],
    qingshang: [
      '各有千秋，每个孩子都有自己的闪光点',
      '您家孩子真不错，我们要向您学习',
      '孩子健康快乐就好，成绩不是唯一',
      '都很优秀，没必要比较',
      '孩子各有特长，都挺好的',
      '您家孩子这么优秀，分享下教育经验呗',
      '每个孩子成长节奏不一样',
      '重要的是孩子快乐，不是成绩',
      '您说得对，我们也要加油',
      '孩子的未来还很长，慢慢来'
    ]
  }
};

/**
 * 生成带Few-shot Examples的Prompt
 */
export function generateSmartReplyPrompt(
  category: string,
  question: string,
  relation: string,
  scene: string
): string {
  // 获取对应分类的示例，如果没有就用催婚的
  const examples = STYLE_EXAMPLES[category as keyof typeof STYLE_EXAMPLES] || STYLE_EXAMPLES['催婚'];

  // 随机添加一些创意提示，避免同质化
  const creativeTips = [
    '可以结合2025-2026网络热梗、流行语',
    '可以用反转、自嘲、夸张等手法',
    '可以模仿脱口秀演员的风格',
    '可以用谐音梗、双关语',
    '可以编造搞笑的借口和理由',
    '可以用假装听不懂、答非所问的方式',
    '可以用数据、统计学来搞笑',
    '可以用哲学、鸡汤文的方式反讽',
    '可以引用知乎神回复的风格',
    '可以用李雪琴式的自嘲段子'
  ];
  const randomTip = creativeTips[Math.floor(Math.random() * creativeTips.length)];

  return `你是一个网络段子手，擅长用幽默、有梗、甚至有点损的方式回复尴尬问题。这是一个娱乐软件，用户想要的是有趣、好玩、让人笑的回复，而不是正经八百的标准答案。

【参考风格示例】（学习这种风格，但不要照抄，要结合具体问题创新）：

🔥 怼人版风格（直接反击，有点狠但有趣）：
${examples.duiren.slice(0, 6).map(e => `- "${e}"`).join('\n')}

😂 有梗版风格（网络段子，让人笑出声）：
${examples.yougen.slice(0, 6).map(e => `- "${e}"`).join('\n')}

😊 情商版风格（幽默化解，不伤感情）：
${examples.qingshang.slice(0, 6).map(e => `- "${e}"`).join('\n')}

【当前场景】
对方是：${relation}
场景：${scene}
对方问：${question}

【回复要求】
1. 要有网感，要有梗，要让人笑
2. 怼人版可以适当损人，但要有趣不要真伤人
3. 有梗版要有网络段子的感觉，可以夸张
4. 情商版要幽默化解，让气氛轻松
5. 每个版本控制在20-30字
6. 不要说教，不要正经，要娱乐性
7. 可以用网络流行语、表情包文案的风格
8. 创意提示：${randomTip}
9. **重要**：每次生成都要有新意，不要重复之前的套路和句式，可以随机组合不同的梗

请直接输出JSON格式（不要任何其他文字）：
{
  "duiren": "怼人版回复",
  "yougen": "有梗版回复",
  "qingshang": "情商版回复"
}`;
}

/**
 * 获取所有分类
 */
export function getAllCategories(): string[] {
  return Object.keys(STYLE_EXAMPLES);
}
